<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8" />

        <title>Josh Cantie</title>

        <!-- Bootstrap CSS, JS, Popper.js, jQuery -->
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
            crossorigin="anonymous"
        />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
            integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
            crossorigin="anonymous"
        />

        <!-- jQuery, Popper, Bootstrap -->
        <script
            src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"
        ></script>
    </head>

    <style>

        /* Font */
        @font-face {
        	src: url(fonts/Lato-Regular.ttf);
        	font-family: Lato;
        }

        .title {
        	position: absolute;
        	top: 25%;
        	left: 50%;
        	-moz-transform: translateX(-50%) translateY(-50%);
        	-webkit-transform: translateX(-50%) translateY(-50%);
        	transform: translateX(-50%) translateY(-50%);
        }

        .header {
        	color: #F6D55C;
        	font-family: Lato;
        	text-align: center;
        	font-size: 65px;
        }

        .description {
        	color: #ED553B;
        	font-family: Lato;
        	text-align: center;
        	font-size: 25px;
        }


        .top {
        	margin-top: 70px;
        }

        img {
        	border-radius: 8px;
        	border: 3px solid #ED553B;
        	margin-top: 25px;
        	overflow: hidden;
        	image-orientation: from-image;
        }

        .text-style {
        	color: #3CAEA3;
        	font-family: Lato;
        	font-size: 20px;
        	text-align: center;
        }

        .nav-color {
        	background-color: #173F5F;
        }

        .link-text {
        	color: #F6D55C;
        	font-family: Lato;
        	font-size: 30px;
        	margin: 7px;
        }

        .link-text:hover {
        	color: #bda346;
        	transition: color 0.2s;
        }

        body {
        	min-width: 566px;
        	min-height: 700px;
        }

        .footer {
        	text-align: center;
        	position: relative;
        	margin-top: 50px;
        }

        .icon-color {
        	color: #F6D55C; <!-- Gray -->
        }

        .facebook:hover {
        	color: #bda346;
        	transition: color 0.2s;
        }

        .linkedin:hover {
        	color: #bda346;
        	transition: color 0.2s;
        }

        .email:hover{
        	color: #9e3a29;
        	transition: color 0.2s;
        }

        .post-red {
        	margin-top: 60px;
        	border-radius: 8px;
        	border: 3px solid #ED553B;
        	width: 70%;
        }

        .post-blue {
        	margin-top: 60px;
        	border-radius: 8px;
        	border: 3px solid #3CAEA3;
        	width: 70%;
        }

        .post-yellow {
        	margin-top: 60px;
        	border-radius: 8px;
        	border: 3px solid #F6D55C;
        	width: 70%;
        }

        .blog-text-red {
        	color: #ED553B;
        	font-family: Lato;
        	text-align: left;
        	font-size: 20px;
        }

        .blog-text-blue {
        	color: #3CAEA3;
        	font-family: Lato;
        	text-align: left;
        	font-size: 20px;
        }

        .blog-text-yellow {
        	color: #F6D55C;
        	font-family: Lato;
        	text-align: left;
        	font-size: 20px;
        }

        .line-red {
        	border-radius: 8px;
        	border: 1.5px solid #ED553B;
        }

        .line-blue {
        	border-radius: 8px;
        	border: 1.5px solid #3CAEA3;
        }

        .line-yellow {
        	border-radius: 8px;
        	border: 1.5px solid #F6D55C;
        }

        .botlink_left {
        	text-align: left;
        	margin-bottom: 50px;
        	font-size: 30px;
        }

        .botlink_right {
        	text-align: right;
        	margin-bottom: 50px;
        	font-size: 30px;
        }

        .red-text {
        	color: #ED553B;
        }

        .red-figcaption {
        	color: #ED553B;
        	margin-top: 2px;
        }

        .yellow-text {
        	color: #F6D55C;
        }


        .blue-text {
        	color: #3CAEA3;
        }

        .red-text:hover {
        	color: #9e3a29;
        	transition: color 0.2s;
        }

        .yellow-text:hover {
        	color: #bda346;
        	color: #bda346;
        	transition: color 0.2s;
        }

        .blue-text:hover {
        	color: #2a7d75;
        	transition: color 0.2s;
        }

        .flex-container {
        	display: flex;
        	flex-wrap: wrap;
        	justify-content: center;
        }

        .code-block {
        	padding: 12px 20px;
        	background-color: rgba(59, 59, 59, 0.7);
        	border-radius: 10px;
        	margin-bottom: 12px;
        }

        code {
        	color: #5eb0f7;
        	font-size: 105%;
        }

        /* Specific blog post images */

        .nav-mesh-img {
        	height: 334px;
        	width: 700px;
        	border: 3px solid #ED553B;
        }

        .nma-gifs {
        	height: 340px;
        	width: 600px;
        	border: 3px solid #ED553B;
        }

        /* Small screen adjustments */
        @media (max-height: 700px) {

        	.top {
        		margin-top: 5px;
        	}

        	.header {
        		font-size: 50px;
        	}

        	.link-text {
        		font-size: 25px;
        	}

        }

        @media (max-width: 1177px) {

        	.nav-mesh-img {
        		height: 238px;
        		width: 500px;
        		border: 3px solid #ED553B;
        	}

        	.nma-gifs {
        		height: 283px;
        		width: 500px;
        		border: 3px solid #ED553B;
        	}
        }

        @media (max-width: 812px) {

        	.nav-mesh-img {
        		visibility: hidden;
        	}

        	.nma-gifs {
        		visibility: hidden;
        	}

        	.red-figcaption {
        		visibility: hidden;
        	}
        }
    </style>

    <body style="background-color: #173f5f">
        <!-- Navbar -->
        <ul class="nav nav-width">
            <li class="nav-item">
                <a class="nav-link link-text" href="index.html">Home</a>
            </li>
            <li class="nav-item">
                <a
                    class="nav-link link-text"
                    href="files/resume_may_25_website.pdf"
                    >Resume</a
                >
            </li>
            <li class="nav-item">
                <a class="nav-link link-text" href="portfolio.html"
                    >Portfolio</a
                >
            </li>
            <li class="nav-item">
                <a class="nav-link link-text" href="blog_current.html">Blog</a>
            </li>
        </ul>

        <!-- Title -->
        <div class="top">
            <div class="header d-none d-sm-block">Josh's Blog</div>
            <div class="description d-none d-sm-block">
                Things I did on my computer and more.
            </div>
            <a
                class="description d-none d-sm-block"
                style="color: #f6d55c"
                href="archive.html"
                >Blog Archive</a
            >
        </div>

        <!-- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->

        <!-- Post -->
        <div class="post-red container">
            <div>
                <div class="row">
                    <div class="col-sm blog-text-red" style="padding-top: 11px">
                        Playing with a Map
                    </div>
                    <div
                        class="col-sm blog-text-red d-none d-sm-block"
                        style="text-align: right; padding-top: 11px"
                    >
                        May 26th, 2023
                    </div>
                </div>
            </div>

            <hr class="line-red" />

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                Hi There,
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                We’re finally cooking with gas! Now that I have a bunch of core
                pieces of my game setup, I’ve moved on to putting together a
                map. I first wanted to see what would happen once I moved my
                player, enemies, and other key components (such as my audio
                manager and main canvas) to a new scene; whenever the
                environment changes, you learn a lot about what settings need to
                change. I downloaded a desert-themed terrain and town pack (by

                <a
                    style="color: #ed553b"
                    href="https://assetstore.unity.com/packages/3d/environments/desert-town-environment-low-poly-194870"
                    target="_blank"
                    rel="noopener noreferrer"
                    ><u>Halberstram Art</u></a
                >), and luckily it already had a demo scene that I could use as
                my testing grounds. I placed my player and enemies in the
                environment, and after doing some minor tweaking and re-baking
                the nav mesh, everything was up and running pretty smoothly.
                Nice!
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                I will say that having an actual town to run around in is
                exposing some flaws in my movement system for the player. I
                don’t like how the player can change directions in midair, and I
                want to make his jump feel a bit more realistic. I also am
                finding that my game sometimes messes up on calculating whether
                or not the player should have a second jump. I plan on modifying
                this movement system soon, so that movement feels little less
                clunky and simplistic.
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                There was some other progress I made on this new map (one of
                which was lighting; this is seriously the best tutorial I have
                ever seen on basic lighting in a Unity scene:

                <a
                    style="color: #ed553b"
                    href="https://www.youtube.com/watch?v=uwYf1yMPuvk"
                    target="_blank"
                    rel="noopener noreferrer"
                    ><u
                        >Unity 2020 Tutorial - Lighting And Post-Processing Low
                        Poly Scene</u
                    ></a
                >), but I want to highlight what I thought was the most
                interesting thing I learned with moving to this new map.
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                This map is a lot larger than what I had been working on in my
                demo scene, so when I re-baked the nav mesh, there were more
                obstacles that had to be considered. Here’s a peek at what the
                nav mesh looks like in the new scene. Note that you can see the
                player on top of a roof:
            </p>

            <!-- Nav Mesh Image -->
            <div style="text-align: center; margin-bottom: 43px">
                <img class="nav-mesh-img" src="images/navmesh_scene.png" />
            </div>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                Since the nav mesh is more complex, it sometimes takes the nav
                mesh agent more time to calculate a path to its target. If the
                target (which is the player) is reachable, it’s not an issue,
                but if the player is in an unreachable location – such as on the
                roof of a building – then the nav mesh agent takes a longer
                amount of time to go through a bunch of possibilities before
                moving closer towards the player.
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                Normally, I’ve been setting the destination of the nav mesh
                agent with this code:
            </p>

            <div class="code-block">
                <code>
                    navMeshAgent.destination = player.transform.position;
                </code>
            </div>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                But this is an asynchronous call, so the nav mesh agent will not
                move until it can calculate what its destination should be. So,
                when I was calling this every frame (which in general is a bad
                idea, not very efficient to update your nav mesh agent’s so
                frequently, and it’s unnecessary), I was finding that the nav
                mesh agent was literally just paralyzed because it couldn’t
                calculate a path before the next frame rolled around, and then
                it had to start over. When I tried only calling every second,
                the nav mesh agent started to move again, but it would stop
                every time it needed to calculate its destination again, which
                resulted in the agent stuttering as it moved.
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                To resolve this, I had to instead use this code:
            </p>

            <div class="code-block">
                <code>
                    NavMesh.CalculatePath(navMeshAgent.transform.position,
                    player.transform.position, NavMesh.AllAreas, path);
                    navMeshAgent.SetPath(path);
                </code>
            </div>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                The call to CalculatePath() is synchronous, and it calculates a
                route for the nav mesh agent while it’s still moving. The agent
                will keep moving on its path, and only change paths once the
                calculation is complete, so it will move fluidly without pausing
                or stuttering. You can see the difference between the two below:
            </p>

            <!-- NMA Gif 1 -->
            <div style="text-align: center; margin-bottom: 43px">
                <img class="nma-gifs" src="images/nma_stutter.gif" />
                <figcaption class="red-figcaption">
                    Nav mesh agent stutters while calculating path.
                </figcaption>
            </div>

            <!-- NMA Gif 2 -->
            <div style="text-align: center; margin-bottom: 43px">
                <img class="nma-gifs" src="images/nma_working.gif" />
                <figcaption class="red-figcaption">
                    Nav mesh agent moves fluidly, calculates path while moving.
                </figcaption>
            </div>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                The one concern to think about going forward is whether the
                CalculatePath() calls will cause frame rate issues. I plan on
                loading this map up with a ton of enemy AI in the future to see
                what happens, so that will be telling!
            </p>

            <p
                class="blog-text-red"
                style="text-align: left; padding-right: 30px"
            >
                Stay tuned for more updates!
            </p>

            <p
                class="blog-text-red"
                style="text-align: right; padding-right: 30px"
            >
                --Josh
            </p>
        </div>

        <!-- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->

        <!-- Navigate to other posts -->

        <div class="container" style="margin-top: 50px">
            <div class="row">
                <a
                    href="blog_6-16-23.html"
                    class="col-sm botlink_left red-text"
                    style="text-decoration: none"
                >
                    <-- Newer Post
                </a>
                <a
                    href="blog_5-6-23.html"
                    class="col-sm botlink_right red-text"
                    style="text-decoration: none"
                >
                    Older Post -->
                </a>
            </div>
        </div>

        <!-- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->

        <!-- Footer -->
        <div style="margin-bottom: 100px"></div>
    </body>
</html>
